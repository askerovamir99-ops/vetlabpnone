<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–ì–æ—Å–í–µ—Ç–õ–∞–± ‚Äî Super App</title>
    <meta name="description" content="–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –±—É–¥—É—â–µ–≥–æ. AI-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –∑–∞–ø–∏—Å—å –æ–Ω–ª–∞–π–Ω.">
    <meta name="theme-color" content="#ffffff">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* =========================================
           1. DESIGN SYSTEM & VARIABLES
           ========================================= */
        :root {
            /* Colors: Light Mode */
            --bg-body: #F2F4F8;
            --bg-surface: #FFFFFF;
            --bg-surface-2: #F8FAFC;
            --bg-glass: rgba(255, 255, 255, 0.9);
            
            --text-main: #0F172A;
            --text-secondary: #64748B;
            --text-tertiary: #94A3B8;

            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --primary-light: #EFF6FF;
            
            --accent: #10B981;   /* Success/Open */
            --danger: #EF4444;   /* Error/Closed */
            --warning: #F59E0B;
            
            --border: #E2E8F0;
            --divider: #F1F5F9;

            /* UI Metrics */
            --radius-xl: 28px;
            --radius-lg: 20px;
            --radius-md: 14px;
            --radius-sm: 8px;
            
            --nav-height: 65px;
            --header-height: 60px;
            --safe-area-bottom: env(safe-area-inset-bottom, 20px);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 25px -5px rgba(0,0,0,0.1);
            --shadow-up: 0 -4px 20px rgba(0,0,0,0.08);

            --transition: cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* Colors: Dark Mode */
        [data-theme="dark"] {
            --bg-body: #000000;
            --bg-surface: #111827;
            --bg-surface-2: #1F2937;
            --bg-glass: rgba(17, 24, 39, 0.9);

            --text-main: #F8FAFC;
            --text-secondary: #94A3B8;
            --text-tertiary: #64748B;

            --primary: #60A5FA;
            --primary-dark: #3B82F6;
            --primary-light: rgba(59, 130, 246, 0.15);

            --border: #1F2937;
            --divider: #111827;
        }

        /* =========================================
           2. RESET & BASE
           ========================================= */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        html, body { margin: 0; padding: 0; height: 100%; font-family: 'Inter', sans-serif; background: var(--bg-body); color: var(--text-main); transition: background 0.3s ease; scroll-behavior: smooth; }
        h1, h2, h3, h4, h5 { font-family: 'Space Grotesk', sans-serif; margin: 0; font-weight: 700; line-height: 1.2; }
        p { margin: 0; line-height: 1.5; color: var(--text-secondary); }
        a { text-decoration: none; color: inherit; }
        button { border: none; background: none; cursor: pointer; font-family: inherit; padding: 0; }
        img { display: block; max-width: 100%; height: auto; object-fit: cover; }
        ul { list-style: none; padding: 0; margin: 0; }

        /* Scrollbar hiding */
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* =========================================
           3. LAYOUT UTILITIES
           ========================================= */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .flex-between { display: flex; align-items: center; justify-content: space-between; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        /* Mobile Wrapper to simulate app behavior on desktop */
        .app-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-bottom: calc(var(--nav-height) + var(--safe-area-bottom));
            position: relative;
            z-index: 1;
        }

        /* =========================================
           4. COMPONENTS
           ========================================= */
        
        /* Buttons */
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            height: 48px; padding: 0 24px;
            border-radius: var(--radius-lg);
            font-weight: 600; font-size: 15px;
            transition: transform 0.1s;
            gap: 8px;
        }
        .btn:active { transform: scale(0.96); }
        .btn-primary { background: var(--primary); color: #fff; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); }
        .btn-soft { background: var(--primary-light); color: var(--primary); }
        .btn-surface { background: var(--bg-surface); border: 1px solid var(--border); color: var(--text-main); }
        .btn-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; transition: 0.2s; }
        .btn-icon:hover { background: var(--bg-surface-2); }

        /* Cards */
        .card {
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
        }

        /* Inputs */
        .input-group { margin-bottom: 16px; }
        .input-label { display: block; font-size: 12px; font-weight: 600; color: var(--text-tertiary); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
        .input-field {
            width: 100%; height: 50px; padding: 0 16px;
            border-radius: var(--radius-md);
            background: var(--bg-surface-2);
            border: 1px solid transparent;
            color: var(--text-main);
            font-size: 16px;
            transition: 0.2s;
        }
        .input-field:focus { border-color: var(--primary); background: var(--bg-surface); }

        /* =========================================
           5. HEADER & HERO (Mobile Optimized)
           ========================================= */
        .app-header {
            position: fixed; top: 0; left: 0; right: 0;
            height: var(--header-height);
            background: var(--bg-glass);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            z-index: 100;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        .app-header.hidden { transform: translateY(-100%); }

        .logo-wrap { display: flex; align-items: center; gap: 8px; font-weight: 800; font-size: 18px; letter-spacing: -0.5px; }
        .logo-icon { color: var(--primary); font-size: 24px; }
        
        .hero-section {
            padding: 90px 20px 30px;
            text-align: left;
        }
        .status-chip {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 6px 12px;
            background: var(--bg-surface);
            border-radius: 20px;
            font-size: 12px; font-weight: 600;
            box-shadow: var(--shadow-sm);
            margin-bottom: 16px;
        }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--text-tertiary); }
        .status-dot.active { background: var(--accent); box-shadow: 0 0 8px var(--accent); }

        .hero-title { font-size: 36px; line-height: 1.05; margin-bottom: 12px; letter-spacing: -1px; }
        .hero-subtitle { font-size: 16px; margin-bottom: 24px; max-width: 90%; }
        
        /* Compact Actions Grid */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }
        .action-item {
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            text-align: center;
        }
        .action-btn {
            width: 60px; height: 60px;
            background: var(--bg-surface);
            border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 26px; color: var(--primary);
            box-shadow: var(--shadow-sm);
            transition: 0.2s;
        }
        .action-btn:active { transform: scale(0.9); background: var(--primary-light); }
        .action-label { font-size: 11px; font-weight: 500; color: var(--text-secondary); }

        /* =========================================
           6. SERVICES (Horizontal Scroll - Stories Style)
           ========================================= */
        .section-header { padding: 0 20px; display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 15px; }
        .section-title { font-size: 20px; }
        .see-all { font-size: 13px; color: var(--primary); font-weight: 600; }

        .h-scroll-wrapper {
            display: flex;
            overflow-x: auto;
            padding: 0 20px 20px;
            gap: 12px;
            scroll-snap-type: x mandatory;
        }
        .service-card-compact {
            min-width: 140px;
            background: var(--bg-surface);
            padding: 16px;
            border-radius: var(--radius-lg);
            display: flex; flex-direction: column;
            scroll-snap-align: start;
            border: 1px solid var(--border);
        }
        .s-icon { 
            width: 40px; height: 40px; 
            background: var(--primary-light); color: var(--primary); 
            border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 12px; 
        }
        .s-title { font-size: 15px; font-weight: 700; margin-bottom: 4px; }
        .s-price { font-size: 13px; color: var(--text-secondary); }

        /* =========================================
           7. LIST ITEMS (Blog, etc.)
           ========================================= */
        .list-vertical { padding: 0 20px; display: flex; flex-direction: column; gap: 12px; }
        .list-item {
            display: flex; gap: 15px;
            background: var(--bg-surface);
            padding: 12px;
            border-radius: var(--radius-md);
            align-items: center;
        }
        .list-thumb { width: 70px; height: 70px; border-radius: 12px; flex-shrink: 0; }
        .list-content { flex: 1; min-width: 0; } /* min-width for truncate */
        .list-title { font-size: 15px; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .list-meta { font-size: 12px; color: var(--text-tertiary); display: flex; gap: 10px; }

        /* =========================================
           8. BOTTOM NAVIGATION
           ========================================= */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            height: calc(var(--nav-height) + var(--safe-area-bottom));
            background: var(--bg-glass);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex; justify-content: space-around;
            padding: 0 10px var(--safe-area-bottom);
            z-index: 900;
            transition: transform 0.3s;
        }
        .bottom-nav.hidden { transform: translateY(100%); }

        .nav-btn {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 4px; color: var(--text-tertiary);
            position: relative;
        }
        .nav-btn i { font-size: 24px; transition: 0.2s; }
        .nav-btn span { font-size: 10px; font-weight: 600; }
        
        .nav-btn.active { color: var(--primary); }
        .nav-btn.active i { transform: translateY(-2px); }
        .nav-btn.active::after {
            content: ''; position: absolute; top: 0; 
            width: 40px; height: 3px; 
            background: var(--primary); 
            border-radius: 0 0 4px 4px;
            box-shadow: 0 2px 8px var(--primary);
        }

        /* FAB (Floating Action Button) - Central */
        .fab-container { position: relative; width: 60px; top: -20px; }
        .fab {
            width: 56px; height: 56px;
            background: var(--primary); /* Solid color fallback */
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 28px;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
            border: 4px solid var(--bg-body); /* Fake transparency cutout */
        }
        .fab:active { transform: scale(0.95); }

        /* =========================================
           9. BOTTOM SHEETS (MODALS)
           ========================================= */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            opacity: 0; visibility: hidden;
            transition: 0.3s;
            backdrop-filter: blur(4px);
        }
        .overlay.active { opacity: 1; visibility: visible; }

        .sheet {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--bg-surface);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.35s cubic-bezier(0.1, 0.9, 0.2, 1);
            max-height: 90vh;
            display: flex; flex-direction: column;
            padding-bottom: var(--safe-area-bottom);
        }
        .sheet.active { transform: translateY(0); }

        .sheet-drag-handle {
            width: 40px; height: 5px; background: var(--border);
            border-radius: 10px; margin: 12px auto; flex-shrink: 0;
        }
        .sheet-header {
            padding: 0 24px 15px;
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
        }
        .sheet-content {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        /* Chat Specific */
        .chat-container { display: flex; flex-direction: column; height: 60vh; }
        .chat-msgs { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; background: var(--bg-body); }
        .msg-bubble { max-width: 80%; padding: 10px 14px; border-radius: 16px; font-size: 14px; line-height: 1.4; position: relative; }
        .msg-in { background: var(--bg-surface); color: var(--text-main); align-self: flex-start; border-bottom-left-radius: 4px; box-shadow: var(--shadow-sm); }
        .msg-out { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .chat-input-area { padding: 10px 15px; background: var(--bg-surface); display: flex; gap: 10px; border-top: 1px solid var(--border); }

        /* Settings Toggle */
        .toggle-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--divider); }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--border); transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* Age Calc Widget */
        .widget-age {
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white; padding: 20px; border-radius: var(--radius-lg);
            margin: 0 20px 30px; position: relative; overflow: hidden;
            display: flex; align-items: center; justify-content: space-between;
        }
        .widget-age input { 
            background: rgba(255,255,255,0.2); border: none; 
            color: white; width: 60px; text-align: center; 
            font-size: 20px; padding: 8px; border-radius: 8px; 
            font-weight: 700;
        }
        .widget-age input::placeholder { color: rgba(255,255,255,0.6); }

        @media (min-width: 769px) {
            /* Desktop Enhancements */
            .app-wrapper { max-width: 480px; margin: 0 auto; border-left: 1px solid var(--border); border-right: 1px solid var(--border); background: var(--bg-body); box-shadow: 0 0 50px rgba(0,0,0,0.05); min-height: 100vh; }
            body { background: #eef2f6; display: flex; justify-content: center; }
            .bottom-nav { position: absolute; max-width: 480px; left: auto; right: auto; border-radius: 0 0 20px 20px; }
            .sheet { position: absolute; max-width: 480px; left: auto; right: auto; }
            .app-header { position: absolute; max-width: 480px; left: auto; right: auto; }
        }

    </style>
</head>
<body>

<div class="app-wrapper">
    
    <header class="app-header" id="header">
        <div class="logo-wrap">
            <i class="ph-fill ph-paw-print logo-icon"></i>
            <span>–ì–æ—Å–í–µ—Ç–õ–∞–±</span>
        </div>
        <div class="flex-center" style="gap: 10px;">
            <button class="btn-icon" onclick="lang.toggle()">
                <span id="langDisplay" style="font-size: 14px; font-weight: 700;">RU</span>
            </button>
            <button class="btn-icon" onclick="sheets.open('profileSheet')">
                <img src="https://ui-avatars.com/api/?name=User&background=3B82F6&color=fff" style="width: 32px; height: 32px; border-radius: 50%;" id="headerAvatar">
            </button>
        </div>
    </header>

    <main style="padding-top: var(--header-height);">
        
        <section class="hero-section">
            <div class="status-chip">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span>
            </div>
            <h1 class="hero-title" data-tr="hero_title">–ó–∞–±–æ—Ç–∞ –æ –ø–∏—Ç–æ–º—Ü–µ<br><span style="color:var(--primary)">–≤ –æ–¥–∏–Ω –∫–ª–∏–∫</span></h1>
            <p class="hero-subtitle" data-tr="hero_sub">–û–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤ –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ 24/7.</p>
        
            <div class="actions-grid">
                <div class="action-item" onclick="sheets.open('bookingSheet')">
                    <div class="action-btn"><i class="ph-fill ph-calendar-plus"></i></div>
                    <span class="action-label" data-tr="act_book">–ó–∞–ø–∏—Å—å</span>
                </div>
                <div class="action-item" onclick="sheets.open('chatSheet')">
                    <div class="action-btn" style="color: var(--accent);"><i class="ph-fill ph-whatsapp-logo"></i></div>
                    <span class="action-label" data-tr="act_chat">–ß–∞—Ç</span>
                </div>
                <div class="action-item" onclick="document.getElementById('servicesSec').scrollIntoView()">
                    <div class="action-btn" style="color: var(--warning);"><i class="ph-fill ph-list-magnifying-glass"></i></div>
                    <span class="action-label" data-tr="act_price">–¶–µ–Ω—ã</span>
                </div>
                <div class="action-item" onclick="sheets.open('mapSheet')">
                    <div class="action-btn" style="color: var(--danger);"><i class="ph-fill ph-map-pin"></i></div>
                    <span class="action-label" data-tr="act_map">–ê–¥—Ä–µ—Å</span>
                </div>
            </div>
        </section>

        <section id="servicesSec">
            <div class="section-header">
                <h3 class="section-title" data-tr="sec_serv">–£—Å–ª—É–≥–∏</h3>
                <span class="see-all" onclick="sheets.open('bookingSheet')" data-tr="btn_all">–í—Å–µ</span>
            </div>
            <div class="h-scroll-wrapper hide-scroll" id="servicesList">
                </div>
        </section>

        <div class="widget-age">
            <div>
                <h3 style="font-size: 18px; margin-bottom: 4px;" data-tr="age_title">–í–æ–∑—Ä–∞—Å—Ç –ø–∏—Ç–æ–º—Ü–∞</h3>
                <div style="font-size: 12px; opacity: 0.9;">16 √ó ln(age) + 31</div>
            </div>
            <div style="text-align: right;">
                <input type="number" placeholder="5" id="ageInput" oninput="app.calcAge()">
                <div style="margin-top: 5px; font-weight: 700; font-size: 14px;">= <span id="humanAge">0</span> <span data-tr="age_res">–ª–µ—Ç</span></div>
            </div>
            <i class="ph-duotone ph-calculator" style="position: absolute; right: -10px; bottom: -20px; font-size: 80px; opacity: 0.2;"></i>
        </div>

        <section style="margin-bottom: 20px;">
            <div class="section-header">
                <h3 class="section-title" data-tr="sec_blog">–ü–æ–ª–µ–∑–Ω–æ–µ</h3>
            </div>
            <div class="list-vertical" id="blogList">
                </div>
        </section>

    </main>

    <nav class="bottom-nav" id="bottomNav">
        <a href="#" class="nav-btn active" onclick="nav.to(this, 'home')">
            <i class="ph-fill ph-house"></i> <span data-tr="nav_home">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-btn" onclick="nav.to(this, 'history')">
            <i class="ph-fill ph-clock-counter-clockwise"></i> <span data-tr="nav_hist">–ò—Å—Ç–æ—Ä–∏—è</span>
        </a>
        
        <div class="fab-container" onclick="sheets.open('chatSheet')">
            <div class="fab"><i class="ph-fill ph-chat-teardrop-text"></i></div>
        </div>

        <a href="#" class="nav-btn" onclick="nav.to(this, 'notif')">
            <i class="ph-fill ph-bell"></i> <span data-tr="nav_notif">–£–≤–µ–¥–æ–º–ª.</span>
        </a>
        <a href="#" class="nav-btn" onclick="sheets.open('profileSheet')">
            <i class="ph-fill ph-user"></i> <span data-tr="nav_prof">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>
</div>

<div class="overlay" id="overlay" onclick="sheets.closeAll()"></div>

<div class="sheet" id="chatSheet" style="height: 80vh;">
    <div class="sheet-drag-handle"></div>
    <div class="sheet-header">
        <h3>AI –ü–æ–º–æ—â–Ω–∏–∫</h3>
        <button onclick="sheets.closeAll()"><i class="ph-bold ph-x"></i></button>
    </div>
    <div class="chat-container">
        <div class="chat-msgs hide-scroll" id="chatBox">
            <div class="msg-bubble msg-in">–ü—Ä–∏–≤–µ—Ç! –Ø AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ì–æ—Å–í–µ—Ç–õ–∞–±. –°–ø—Ä–æ—Å–∏—Ç–µ –ø—Ä–æ —Ü–µ–Ω—ã, –∑–∞–ø–∏—Å—å –∏–ª–∏ —É—Ö–æ–¥ –∑–∞ –ø–∏—Ç–æ–º—Ü–µ–º. üê∂</div>
        </div>
        <div class="chat-input-area">
            <input type="text" class="input-field" id="chatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." style="height: 40px; font-size: 14px;">
            <button class="btn-primary" style="width: 40px; height: 40px; border-radius: 50%;" onclick="chat.send()"><i class="ph-fill ph-paper-plane-right"></i></button>
        </div>
    </div>
</div>

<div class="sheet" id="bookingSheet">
    <div class="sheet-drag-handle"></div>
    <div class="sheet-header">
        <h3 data-tr="book_title">–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å</h3>
        <button onclick="sheets.closeAll()"><i class="ph-bold ph-x"></i></button>
    </div>
    <div class="sheet-content">
        <div class="input-group">
            <label class="input-label" data-tr="lbl_service">–£—Å–ª—É–≥–∞</label>
            <select class="input-field" id="bookService">
                <option value="–û—Å–º–æ—Ç—Ä">–û—Å–º–æ—Ç—Ä (3000 ‚Ç∏)</option>
                <option value="–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è">–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è (5000 ‚Ç∏)</option>
                <option value="–£–ó–ò">–£–ó–ò (4000 ‚Ç∏)</option>
            </select>
        </div>
        <div class="input-group">
            <label class="input-label" data-tr="lbl_date">–î–∞—Ç–∞</label>
            <input type="date" class="input-field" id="bookDate">
        </div>
        <button class="btn btn-primary" style="width: 100%; margin-top: 10px;" onclick="booking.submit()" data-tr="btn_confirm">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
</div>

<div class="sheet" id="profileSheet">
    <div class="sheet-drag-handle"></div>
    <div class="sheet-header">
        <h3 data-tr="prof_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <button onclick="sheets.closeAll()"><i class="ph-bold ph-x"></i></button>
    </div>
    <div class="sheet-content">
        <div style="text-align: center; margin-bottom: 20px;">
            <div style="width: 80px; height: 80px; background: var(--primary-light); border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 30px; color: var(--primary);">
                <i class="ph-fill ph-user"></i>
            </div>
            <input type="text" id="profileNameInput" value="–ì–æ—Å—Ç—å" style="text-align: center; border: none; background: transparent; font-size: 20px; font-weight: 700; width: 100%;" onchange="profile.save()">
            <p style="font-size: 13px;" data-tr="prof_sub">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–º—è —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å</p>
        </div>

        <div class="toggle-row">
            <span style="font-weight: 500;">Dark Mode</span>
            <label class="switch">
                <input type="checkbox" id="themeToggle" onchange="app.toggleTheme()">
                <span class="slider"></span>
            </label>
        </div>
        
        <div class="toggle-row">
            <span style="font-weight: 500;" data-tr="lbl_notif">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
            <label class="switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
            </label>
        </div>

        <button class="btn btn-soft" style="width: 100%; margin-top: 20px; color: var(--danger);" onclick="localStorage.clear(); location.reload();">
            <i class="ph-bold ph-sign-out"></i> –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
        </button>
    </div>
</div>

<div class="sheet" id="mapSheet" style="height: 60vh;">
    <div class="sheet-drag-handle"></div>
    <div class="sheet-content" style="padding: 0;">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2906.776092873216!2d76.9095!3d43.2385!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDPCsDE0JzE4LjYiTiA3NsKwNTQnMzQuMiJF!5e0!3m2!1sen!2skz!4v1600000000000!5m2!1sen!2skz" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
    </div>
</div>

<script>
    // ================= DATA & TRANSLATIONS =================
    const db = {
        ru: {
            hero_title: "–ó–∞–±–æ—Ç–∞ –æ –ø–∏—Ç–æ–º—Ü–µ<br><span style='color:var(--primary)'>–≤ –æ–¥–∏–Ω –∫–ª–∏–∫</span>",
            hero_sub: "–û–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å—å –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ 24/7.",
            status_open: "–°–µ–π—á–∞—Å –æ—Ç–∫—Ä—ã—Ç–æ", status_closed: "–°–µ–π—á–∞—Å –∑–∞–∫—Ä—ã—Ç–æ",
            act_book: "–ó–∞–ø–∏—Å—å", act_chat: "–ß–∞—Ç", act_price: "–¶–µ–Ω—ã", act_map: "–ê–¥—Ä–µ—Å",
            sec_serv: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏", btn_all: "–í—Å–µ",
            sec_blog: "–ü–æ–ª–µ–∑–Ω–æ–µ",
            nav_home: "–ì–ª–∞–≤–Ω–∞—è", nav_hist: "–ó–∞–ø–∏—Å–∏", nav_notif: "–ò–Ω—Ñ–æ", nav_prof: "–ü—Ä–æ—Ñ–∏–ª—å",
            book_title: "–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å", lbl_service: "–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É", lbl_date: "–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É", btn_confirm: "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è",
            prof_title: "–ü—Ä–æ—Ñ–∏–ª—å", prof_sub: "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–º—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è", lbl_notif: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
            age_title: "–í–æ–∑—Ä–∞—Å—Ç –ø–∏—Ç–æ–º—Ü–∞", age_res: "—á–µ–ª. –ª–µ—Ç"
        },
        kz: {
            hero_title: "“Æ–π –∂–∞–Ω—É–∞—Ä—ã“£—ã–∑“ì–∞<br><span style='color:var(--primary)'>“õ–∞–º“õ–æ—Ä–ª—ã“õ</span>",
            hero_sub: "–û–Ω–ª–∞–π–Ω –∂–∞–∑—ã–ª—É –∂”ô–Ω–µ 24/7 –∫–µ“£–µ—Å.",
            status_open: "“ö–∞–∑—ñ—Ä –∞—à—ã“õ", status_closed: "“ö–∞–∑—ñ—Ä –∂–∞–±—ã“õ",
            act_book: "–ñ–∞–∑—ã–ª—É", act_chat: "–ß–∞—Ç", act_price: "–ë–∞“ì–∞", act_map: "–ú–µ–∫–µ–Ω–∂–∞–π",
            sec_serv: "“ö—ã–∑–º–µ—Ç—Ç–µ—Ä", btn_all: "–ë”ô—Ä—ñ",
            sec_blog: "–ü–∞–π–¥–∞–ª—ã",
            nav_home: "–ë–∞—Å—Ç—ã", nav_hist: "–¢–∞—Ä–∏—Ö", nav_notif: "–ê“õ–ø–∞—Ä–∞—Ç", nav_prof: "–ü—Ä–æ—Ñ–∏–ª—å",
            book_title: "–ñ–∞“£–∞ –∂–∞–∑–±–∞", lbl_service: "“ö—ã–∑–º–µ—Ç—Ç—ñ —Ç–∞“£–¥–∞“£—ã–∑", lbl_date: "–ö“Ø–Ω–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑", btn_confirm: "–†–∞—Å—Ç–∞—É",
            prof_title: "–ü—Ä–æ—Ñ–∏–ª—å", prof_sub: "–ê—Ç—ã–Ω ”©–∑–≥–µ—Ä—Ç—É “Ø—à—ñ–Ω –±–∞—Å—ã“£—ã–∑", lbl_notif: "–•–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä",
            age_title: "–ñ–∞–Ω—É–∞—Ä –∂–∞—Å—ã", age_res: "–∞–¥–∞–º –∂–∞—Å—ã–º–µ–Ω"
        },
        services: [
            { name_ru: "–û—Å–º–æ—Ç—Ä", name_kz: "–¢–µ–∫—Å–µ—Ä—É", price: "3000 ‚Ç∏", icon: "ph-stethoscope" },
            { name_ru: "–í–∞–∫—Ü–∏–Ω–∞", name_kz: "–í–∞–∫—Ü–∏–Ω–∞", price: "5000 ‚Ç∏", icon: "ph-syringe" },
            { name_ru: "–£–ó–ò", name_kz: "–£–ó–ò", price: "4000 ‚Ç∏", icon: "ph-wave-sawtooth" },
            { name_ru: "–ó—É–±—ã", name_kz: "–¢—ñ—Å –µ–º–¥–µ—É", price: "6000 ‚Ç∏", icon: "ph-tooth" },
            { name_ru: "–•–∏—Ä—É—Ä–≥", name_kz: "–•–∏—Ä—É—Ä–≥", price: "15000 ‚Ç∏", icon: "ph-scalpel" }
        ],
        blog: [
            { title_ru: "–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∫–æ—Ä–º?", title_kz: "–ñ–µ–º–¥—ñ “õ–∞–ª–∞–π —Ç–∞“£–¥–∞—É –∫–µ—Ä–µ–∫?", img: "https://images.unsplash.com/photo-1589924691195-41432c84c161?auto=format&fit=crop&w=100&q=80", tag: "–ü–∏—Ç–∞–Ω–∏–µ" },
            { title_ru: "–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏–≤–∏–≤–æ–∫", title_kz: "–ï–∫–ø–µ –∫–µ—Å—Ç–µ—Å—ñ", img: "https://images.unsplash.com/photo-1623387641168-d9803ddd3f35?auto=format&fit=crop&w=100&q=80", tag: "–ó–¥–æ—Ä–æ–≤—å–µ" },
            { title_ru: "–ö–ª–µ—â–∏: –∑–∞—â–∏—Ç–∞", title_kz: "–ö–µ–Ω–µ–ª–µ—Ä–¥–µ–Ω “õ–æ—Ä“ì–∞—É", img: "https://images.unsplash.com/photo-1555685812-4b943f1cb0eb?auto=format&fit=crop&w=100&q=80", tag: "–°–µ–∑–æ–Ω–Ω–æ–µ" }
        ]
    };

    // ================= STATE & UTILS =================
    const state = {
        lang: 'ru',
        theme: localStorage.getItem('theme') || 'light'
    };

    // ================= APP CONTROLLER =================
    const app = {
        init() {
            // Apply theme immediately
            document.body.setAttribute('data-theme', state.theme);
            document.getElementById('themeToggle').checked = state.theme === 'dark';

            // Initial Renders
            this.renderText();
            this.renderServices();
            this.renderBlog();
            this.checkStatus();
            profile.load();

            // Setup Header Scroll
            let lastScroll = 0;
            window.addEventListener('scroll', () => {
                const current = window.pageYOffset;
                const header = document.getElementById('header');
                const nav = document.getElementById('bottomNav');
                
                if (current > 50 && current > lastScroll) {
                    header.classList.add('hidden');
                    nav.classList.add('hidden');
                } else {
                    header.classList.remove('hidden');
                    nav.classList.remove('hidden');
                }
                lastScroll = current;
            });
            
            // Set default date
            document.getElementById('bookDate').valueAsDate = new Date();
        },

        toggleTheme() {
            state.theme = state.theme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', state.theme);
            localStorage.setItem('theme', state.theme);
        },

        renderText() {
            const t = db[state.lang];
            document.querySelectorAll('[data-tr]').forEach(el => {
                const key = el.getAttribute('data-tr');
                if(t[key]) el.innerHTML = t[key];
            });
            document.getElementById('langDisplay').innerText = state.lang.toUpperCase();
            this.checkStatus();
        },

        renderServices() {
            const box = document.getElementById('servicesList');
            box.innerHTML = db.services.map(s => `
                <div class="service-card-compact" onclick="sheets.open('bookingSheet')">
                    <div class="s-icon"><i class="ph-fill ${s.icon}"></i></div>
                    <div class="s-title">${state.lang==='ru'?s.name_ru:s.name_kz}</div>
                    <div class="s-price">${s.price}</div>
                </div>
            `).join('');
        },

        renderBlog() {
            const box = document.getElementById('blogList');
            box.innerHTML = db.blog.map(b => `
                <div class="list-item">
                    <img src="${b.img}" class="list-thumb">
                    <div class="list-content">
                        <div style="font-size:10px; color:var(--primary); font-weight:700; text-transform:uppercase;">${b.tag}</div>
                        <div class="list-title">${state.lang==='ru'?b.title_ru:b.title_kz}</div>
                        <div class="list-meta">5 –º–∏–Ω —á—Ç–µ–Ω–∏–µ ‚Ä¢ –°–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <i class="ph-bold ph-caret-right" style="color:var(--border);"></i>
                </div>
            `).join('');
        },

        checkStatus() {
            const h = new Date().getHours();
            const isOpen = h >= 8 && h < 22;
            const dot = document.getElementById('statusDot');
            const txt = document.getElementById('statusText');
            
            if(isOpen) {
                dot.className = 'status-dot active';
                txt.innerText = db[state.lang].status_open;
            } else {
                dot.className = 'status-dot';
                txt.style.backgroundColor = 'var(--danger)';
                txt.innerText = db[state.lang].status_closed;
            }
        },

        calcAge() {
            const v = document.getElementById('ageInput').value;
            const r = document.getElementById('humanAge');
            if(v > 0) r.innerText = Math.round(16 * Math.log(v) + 31);
            else r.innerText = 0;
        }
    };

    // ================= LANGUAGE =================
    const lang = {
        toggle() {
            state.lang = state.lang === 'ru' ? 'kz' : 'ru';
            app.renderText();
            app.renderServices();
            app.renderBlog();
        }
    };

    // ================= SHEETS / MODALS =================
    const sheets = {
        open(id) {
            document.getElementById('overlay').classList.add('active');
            document.getElementById(id).classList.add('active');
            // Haptic feedback pattern if supported
            if(navigator.vibrate) navigator.vibrate(5);
        },
        closeAll() {
            document.getElementById('overlay').classList.remove('active');
            document.querySelectorAll('.sheet').forEach(s => s.classList.remove('active'));
        }
    };

    // ================= NAVIGATION =================
    const nav = {
        to(el, page) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            
            if(page === 'home') window.scrollTo({top: 0, behavior: 'smooth'});
            if(page === 'notif') alert(state.lang === 'ru' ? '–ù–µ—Ç –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π' : '–ñ–∞“£–∞ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä –∂–æ“õ');
            // History would load a different view logic
        }
    };

    // ================= CHAT =================
    const chat = {
        send() {
            const inp = document.getElementById('chatInput');
            const txt = inp.value.trim();
            if(!txt) return;

            this.addMsg(txt, 'msg-out');
            inp.value = '';

            // Simulated AI typing delay
            setTimeout(() => {
                let reply = "";
                const low = txt.toLowerCase();
                if(low.includes('—Ü–µ–Ω') || low.includes('price') || low.includes('–±–∞“ì–∞'))
                    reply = state.lang === 'ru' 
                        ? "–û—Å–º–æ—Ç—Ä: 3000‚Ç∏<br>–í–∞–∫—Ü–∏–Ω–∞: 5000‚Ç∏<br>–•–∏—Ä—É—Ä–≥–∏—è: –æ—Ç 15000‚Ç∏" 
                        : "–¢–µ–∫—Å–µ—Ä—É: 3000‚Ç∏<br>–í–∞–∫—Ü–∏–Ω–∞: 5000‚Ç∏";
                else if(low.includes('–∑–∞–ø–∏—Å') || low.includes('book'))
                    reply = state.lang === 'ru' ? "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É '–ó–∞–ø–∏—Å—å' –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ." : "'–ñ–∞–∑—ã–ª—É' —Ç“Ø–π–º–µ—Å—ñ–Ω –±–∞—Å—ã“£—ã–∑.";
                else
                    reply = state.lang === 'ru' ? "–Ø –ø–æ–∫–∞ —É—á—É—Å—å. –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –Ω–∞–º: +7 (777) 123-45-67" : "–ú–µ–Ω ”ô–ª—ñ “Ø–π—Ä–µ–Ω—É–¥–µ–º—ñ–Ω. –ë—ñ–∑–≥–µ —Ö–∞–±–∞—Ä–ª–∞—Å—ã“£—ã–∑: +7 (777) 123-45-67";
                
                this.addMsg(reply, 'msg-in');
            }, 800);
        },
        addMsg(txt, cls) {
            const box = document.getElementById('chatBox');
            const d = document.createElement('div');
            d.className = `msg-bubble ${cls}`;
            d.innerHTML = txt;
            box.appendChild(d);
            box.scrollTop = box.scrollHeight;
        }
    };

    // ================= BOOKING =================
    const booking = {
        submit() {
            sheets.closeAll();
            const date = document.getElementById('bookDate').value;
            const srv = document.getElementById('bookService').value;
            
            // SweetAlert style native fallback
            const msg = state.lang === 'ru' 
                ? `‚úÖ –ó–∞–ø–∏—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!\n–£—Å–ª—É–≥–∞: ${srv}\n–î–∞—Ç–∞: ${date}` 
                : `‚úÖ –ñ–∞–∑—ã–ª—É —Ä–∞—Å—Ç–∞–ª–¥—ã!\n“ö—ã–∑–º–µ—Ç: ${srv}\n–ö“Ø–Ω: ${date}`;
            
            setTimeout(() => alert(msg), 300);
        }
    };

    // ================= PROFILE =================
    const profile = {
        load() {
            const name = localStorage.getItem('userName') || (state.lang === 'ru' ? '–ì–æ—Å—Ç—å' : '“ö–æ–Ω–∞“õ');
            document.getElementById('profileNameInput').value = name;
        },
        save() {
            const val = document.getElementById('profileNameInput').value;
            localStorage.setItem('userName', val);
        }
    };

    // Init App
    window.addEventListener('DOMContentLoaded', () => app.init());

</script>
</body>
</html>
